"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = TemplateDiploma;

var _sanitize = _interopRequireDefault(require("../utils/sanitize"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function TemplateDiploma({
  title,
  issuerName,
  subjectName,
  expiryDate,
  date,
  image,
  images,
  qrImage,
  documents
}) {
  const subjectDocuments = documents && documents[0] || []; // Only one document/subject per diploma

  const degreeDocument = subjectDocuments.filter(d => typeof d.type === 'string' && d.type.indexOf('Degree') !== -1)[0]; // Degree name is either in a degree document or taken from subject

  let degreeName = degreeDocument && degreeDocument.name || subjectName; // Diploma should be assigned to a person

  let personName = degreeDocument && subjectName === degreeName ? '' : subjectName;

  if (degreeName === personName && title) {
    degreeName = title;
  }

  if (personName === degreeName) {
    personName = '';
  }

  return `
    <div class="prettyVC prettyVC-diploma">
      <img src="${(0, _sanitize.default)(images.issuerImage || image)}" class="prettyVC-diploma-headerimage" />
      <h2 class="prettyVC-title prettyVC-diploma-title">
        ${(0, _sanitize.default)(issuerName)}
      </h2>
      <p class="prettyVC-diploma-subtext">
        has issued a <strong>${(0, _sanitize.default)(degreeName || title)}</strong> to
      </p>

      <br />
      <h3 class="prettyVC-diploma-subtitle">
        ${(0, _sanitize.default)(personName || 'Unnamed Person')}
      </h3>
      <br />

      ${qrImage ? `
        <img src="${(0, _sanitize.default)(qrImage)}" class="prettyVC-diploma-qrimage-center" />
      ` : ''}

      <div class="prettyVC-diploma-footer">
        <div class="prettyVC-diploma-footersubject-wrap">
          <div class="prettyVC-diploma-footersubject">
            <strong>${(0, _sanitize.default)(title)}</strong>
            <span>Issued on: ${(0, _sanitize.default)(date)}</span>
            ${expiryDate ? `
              <span>Expire at: ${(0, _sanitize.default)(expiryDate)}</span>
            ` : ''}
          </div>
        </div>
        ${image ? `
          <div class="prettyVC-diploma-logo">
            <img src="${(0, _sanitize.default)(image)}" />
          </div>
        ` : ''}
      </div>
    </div>
  `;
}